<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://pixijs.download/release/pixi.js"></script>
    <style>
      *{
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      body{
        overflow: hidden;
      }
    </style>
</head>
<body>
<script>
class Character {
    constructor(app, x, y) {
        this.sprite = new PIXI.Sprite(PIXI.Texture.from('char.png'));
        this.sprite.anchor.set(0.5);
        this.sprite.x = x;
        this.sprite.y = y;
        this.velocityY = 0;
        this.isJumping = false;
        this.jumpForce = -8;

        app.stage.addChild(this.sprite);
    }

    jump() {
        if (!this.isJumping) {
            this.velocityY = this.jumpForce;
            this.isJumping = true;
        }
    }

    update(platforms) {
        this.velocityY += 0.3; // Gravity

        let onGround = false;

        for (const platform of platforms) {
            if (this.isOnPlatform(platform.getBounds())) {
                // Collision detected, stop falling
                this.velocityY = 0;
                this.isJumping = false;
                this.sprite.y = platform.y - this.sprite.height / 2;
                onGround = true;
                break;
            }
        }

        if (!onGround) {
            this.isJumping = true;
        }

        // Update character's position
        this.sprite.y += this.velocityY;
    }

    isOnPlatform(platform) {
        return (
            this.sprite.y + this.sprite.height / 2 > platform.y &&
            this.sprite.y - this.sprite.height / 2 < platform.y + platform.height &&
            this.sprite.x + this.sprite.width / 2 > platform.x &&
            this.sprite.x - this.sprite.width / 2 < platform.x + platform.width
        );
    }
}

class Platform {
    constructor(app, x, y, width) {
        this.sprite = new PIXI.Graphics();
        this.sprite.beginFill(0x996633);
        this.sprite.drawRect(0, 0, width, 20);
        this.sprite.endFill();
        this.sprite.x = x;
        this.sprite.y = y;
        this.width = width;
        this.height = 20;

        app.stage.addChild(this.sprite);
    }

    getBounds() {
        return {
            x: this.sprite.x,
            y: this.sprite.y,
            width: this.width,
            height: this.height,
        };
    }
}

class Cloud{
    constructor(img, x, y){
        this.sprite = new PIXI.Sprite(PIXI.Texture.from(img));
        // this.sprite.anchor.set(0.5);
        this.sprite.x = x;
        this.sprite.y = y;
        app.stage.addChild(this.sprite)
    }
}
const app = new PIXI.Application({
    width: innerWidth,
    height: innerHeight,
    backgroundColor: 0x1099bb,
});

document.body.appendChild(app.view);


let c1 = new Cloud("/clouds/cloud1.png", 100, 100);

// Load the background image
const backgroundTexture = PIXI.Texture.from('side_fuji5.jpg');
const background = new PIXI.Sprite(backgroundTexture);

// Set the background's position and scale to cover the whole canvas
background.position.set(0, 0);
background.width = app.screen.width;
background.height = app.screen.height;

app.stage.addChild(background);

const character = new Character(app, 100, 100);

const platforms = [
    new Platform(app, 0, 400, 150),
    new Platform(app, 200, 300, 200),
    new Platform(app, 400, 450, 180),
    // Add more platforms as needed
];

app.ticker.add(() => {
    character.update(platforms);
});


document.addEventListener('keydown', (event) => {
    if (event.key === ' ' || event.key === 'ArrowUp') {
        character.jump();
    }
});

</script>
<!-- <script>
const app = new PIXI.Application({
    width: innerWidth - 10,
    height: innerHeight - 10,
    backgroundColor: 0x1099bb,
});

document.body.appendChild(app.view);

// Load the background image
const backgroundTexture = PIXI.Texture.from('download.jpg');
const background = new PIXI.Sprite(backgroundTexture);

// Set the background's position and scale to cover the whole canvas
background.position.set(0, 0);
background.width = app.screen.width;
background.height = app.screen.height;

app.stage.addChild(background);

// Create a sprite for your game character or elements
const texture = PIXI.Texture.from('download.jpg');
const sprite = new PIXI.Sprite(texture);
sprite.anchor.set(0.5);
sprite.x = app.screen.width / 2;
sprite.y = app.screen.height / 2;

app.stage.addChild(sprite);

// Game Loop
app.ticker.add(() => {
    // Your game logic goes here
});

</script> -->
    <!-- <script defer="defer">
// Create the application helper and add its render target to the page
const app = new PIXI.Application({ width: innerWidth - 5, height: innerHeight - 5 });
document.body.appendChild(app.view);

// Add a container to center our sprite stack on the page
const container = new PIXI.Container();
container.x = app.screen.width / 2;
container.y = app.screen.height / 2;
app.stage.addChild(container);

// Create the 3 sprites, each a child of the last
const sprites = [];
let parent = container;
for (let i = 0; i < 3; i++) {
  let sprite = PIXI.Sprite.from('download.jpg');
  sprite.anchor.set(0.5);
  parent.addChild(sprite);
  sprites.push(sprite);
  parent = sprite;
}

// Set all sprite's properties to the same value, animated over time
let elapsed = 0.0;
app.ticker.add((delta) => {
  elapsed += delta / 10;
  for (let i = 0; i < sprites.length; i++) {
    const sprite = sprites[i];
    // sprite.scale.set(scale);
    // sprite.alpha = alpha;
    // sprite.angle = angle;
    sprite.x+=10;
  }
  // const amount = Math.sin(elapsed);
  // const scale = 1.0 + 0.25 * amount;
  // const alpha = 0.75 + 0.25 * amount;
  // const angle = 40 * amount;
  // const x = 75 * amount;
  // for (let i = 0; i < sprites.length; i++) {
  //   const sprite = sprites[i];
  //   sprite.scale.set(scale);
  //   sprite.alpha = alpha;
  //   sprite.angle = angle;
  //   sprite.x = x;
  // }
});
      </script> -->
</body>
</html>